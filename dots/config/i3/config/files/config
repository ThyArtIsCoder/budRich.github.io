# i3config - curated by budRich since 2016
# ========================================

# >>> todo <<<

# media keys, az 
#   doesn't work, c made player float..
#
# sublime sections for i3. add space when commenting.
#
# add window rules. 
# get to work with the ass...

# >>> initializatione <<<

  set $exe exec --no-startup-id exec

  set $left1   y
  set $down1   u
  set $up1     i
  set $right1  o

  set $left2   h
  set $down2   j
  set $up2     k
  set $right2  l

  set $left3   n
  set $down3   m
  set $up3     comma
  set $right3  period

  set $fntsz 8
  # set $browser i3run -c Surf -e 'surf'
  # set $browser i3run -c Vivaldi-stable -e 'vivaldi'
  set $browser i3run -c Vivaldi-stable -e 'vivaldi-snapshot'
  set $editor i3run -i sublime_text -e 'subl'
  set $filemanager i3run -i spacefm -e 'spacefm '
  set $bigsize   10 px or 10 ppt
  set $smallsize 3 px or 3 ppt
  set $bigmove   30 px
  set $smallmove 1 px
  set $tocont focus; exec --no-startup-id exec i3fyra -m
  set $notes i3run -i sublime_notes -e 'subl \
    --project ~/tmp/kortisar/sublime/projects/notes.sublime-project \
    && subl ~/dox/not/i3-four.md \
    && sleep 1 \
    && xdotool set_window --classname "sublime_notes" `i3get -t "(notes)" -r d`'

  set $alt Mod1
  set $win bindsym Mod4
  set $fdmtm floating disable, move to mark

  set_from_resource $act i3wm.act #111313
  set_from_resource $ina i3wm.ina #111313
  set_from_resource $red i3wm.red #FF0000
  set_from_resource $fnt i3wm.fnt Terminus

# >>> panicbuttons <<<

  bindsym F4         kill
  $win+Shift+q       exit
  $win+Control+r     reload
  $win+$alt+r   $exe i3-msg restart
  $win+Shift+x  $exe lock.sh
  $win+Escape   $exe buddown

# >>> terminals <<<

  $win+Return           $exe i3run -i floatterm -e 'urxvtc -name floatterm'
  $win+Shift+Return     $exe i3run -i termsmall -e 'urxvtc -name termsmall'
  $win+Control+Return   $exe i3run -i termside  -e 'urxvtc -name termside'
  $win+$alt+Return      $exe urxvtc -name tempterm

# >>> i3run - sane applaunching for the modern tiler <<<
  $win+e $exe $filemanager
  $win+1 $exe $editor
  $win+2 $exe $browser
  $win+3 $exe i3term irssi
  $win+4 $exe i3term ncmpcpp
  $win+5 $exe i3run -i qbittorrent  -e 'qbittorrent'
  $win+6 $exe i3term newsboat
  $win+9 $exe i3term htop
  $win+grave $exe $notes
  $win+Shift+grave $exe i3run -i gcolor2 -e 'gcolor2'

# >>> barmenu <<<

  $win+BackSpace $exe /home/bud/.config/polybar/scripts/togglebar
  $win+r $exe rofi -show run -config ~/.config/rofi/fullscreen
  bindsym F6 $exe homenu
  bindsym F8 $exe newmenu


# >>> media <<<

#$win+a $exe amixer -q -c 0 set Master playback 1dB+
# 94 = <, less
#bindcode Mod3+94 $exe amixer -q -c 0 set Master playback 1dB-
#$win+z $exe mpc -q next
#$win+Shift+Control+x $exe mpc -q toggle

# >>> misc <<<

  $win+f       $exe i3fyra -a
  $win+Shift+f focus mode_toggle
  $win+s       $exe subpromen
  $win+a       $exe subact

# >>> upload content <<<

  bindsym --release Mod4+Print $exe i3cast

  bindsym --release Print $exe imgur-screenshot.sh -f
  bindsym --release Shift+Print $exe imgur-screenshot.sh -s

  $win+c $exe \
    xclip -o | curl -F c=@- https://ptpb.pw/?u=1 | \
    xclip -selection 'clipboard' && \
    notify-send "Paste uploaded"

# >>> wallpapermanagement <<<

  $win+w        $exe wps -b    # next wallpaper
  $win+Shift+w  $exe wps -s t  # toggle blur

# >>> mousekeys <<<

  bindsym --release button2 kill # mbutton on titlebar kills

# >>> debugging <<<

  $win+shift+t $exe ass st t # dump tree
  $win+shift+d \
    i3-save-tree --output eDP-1 > /tmp/i3layout-dump.json \
    && subl /tmp/i3layout-dump.json
  $win+b $exe runscript # run currently open file in sublime


# >>> moving the size of the focus <<<
   
  $win+control+$left2              resize shrink width  $bigsize
  $win+control+Shift$left2         resize shrink width  $smallsize
  $win+control+$right2             resize grow width    $bigsize
  $win+control+Shift+$right2       resize grow width    $smallsize
  $win+control+$down2              resize shrink height $bigsize
  $win+control+Shift+$down2        resize shrink height $smallsize
  $win+control+$up2                resize grow height   $bigsize
  $win+control+Shift+$up2          resize grow height   $smallsize

  $win$left2               $exe i3fyra -f l 
  $win+$right2             $exe i3fyra -f r 
  $win+$down2              $exe i3fyra -f d 
  $win+$up2                $exe i3fyra -f u 

  $win+Shift$left2         $exe i3fyra -m l 
  $win+Shift+$right2       $exe i3fyra -m r 
  $win+Shift+$down2        $exe i3fyra -m d 
  $win+Shift+$up2          $exe i3fyra -m u 

  $win+$left1              layout tabbed
  $win+$right1             layout splith
  $win+$down1              layout stacked
  $win+$up1                layout splitv

  $win+Tab                 $exe i3fyra -t r
  $win+Shift+Tab           $exe i3fyra -t l 

# >>> workspace stuff <<<

  $win+F1  workspace 1
  $win+F2  workspace 2
  $win+F3  workspace 3
  $win+F12 workspace back_and_forth

  $win+Shift+F1 move container to workspace 1
  $win+Shift+F2 move container to workspace 2
  $win+Shift+F3 move container to workspace 3

# >>> settings <<<

  show_marks no
  floating_modifier $alt
  hide_edge_borders both
  focus_follows_mouse no
  font pango:$fnt $fntsz
  workspace_auto_back_and_forth no

# >>> appearance <<<

  for_window [class="^.*"] border normal 1
  # for_window [tiling] border pixel 1
  # for_window [floating] border normal 1

  # widow Colors           border  bg     text    indic
  client.focused           $act    $act   $act    $act
  client.focused_inactive  $ina    $ina   $ina    $ina
  client.unfocused         $ina    $ina   $ina    $ina
  client.urgent            $red    $red   $red    $red

# >>> window rules <<<

  for_window [class="^.*"] floating enable
  

  for_window [class="Vivaldi-stable"]    $tocont A
  for_window [class="mpv"]               $tocont B
  for_window [instance="sublime_text"]   $tocont A
  for_window [instance="klavaro"]        $tocont A
  for_window [instance="sublime_notes"]  $tocont D
  for_window [instance="spacefm"]        $tocont B
  for_window [instance="irssi"]          $tocont D
  for_window [instance="ncmpcpp"]        $tocont B
  for_window [instance="qbittorrent"]    $tocont C
  for_window [instance="newsbeuter"]     $tocont D
  for_window [instance="htop"]           $tocont A

  for_window [instance="termside"]       $tocont B
  for_window [instance="termsmall"]      $tocont C
  for_window [instance="termsub"]        $tocont C

  for_window [instance="floatterm"] resize set 350 px 250 px

  for_window [window_type="dialog"]    floating enable
  for_window [window_type="splash"]    floating enable
  for_window [window_type="utility"]   floating enable

  no_focus   [instance="keydisplay"]
  for_window [instance="keydisplay"] sticky enable, border none

# >>> automatic execution <<<

  $exe i3fyra -l 'AB=-290 BD=290 AC=-75'


# >>> notes <<<

  # workspace_auto_back_and_forth can cause trouble when tiling is extreme
  # without bindsym to workspaceswitch config doesn't work...

