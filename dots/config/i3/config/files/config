# i3config - curated by budRich since 2016
# ========================================

# >>> todo <<<

# media keys, az 
#   doesn't work, c made player float..
#
# sublime sections for i3. add space when commenting.
#
# add window rules. 
# get to work with the ass...

# >>> initializatione <<<

  set $left   h
  set $down   j
  set $up     k
  set $right  l
  
  # set $browser i3run -c Surf -e 'surf'
  # set $browser i3run -c Vivaldi-stable -e 'vivaldi'
  set $browser i3run -c Vivaldi-stable -e 'vivaldi-snapshot'
  set $editor i3run -i sublime_text -e 'subl'
  set $filemanager i3run -i spacefm -e 'spacefm '
  set $bigsize   10 px or 10 ppt
  set $smallsize 3 px or 3 ppt
  set $bigmove   30 px
  set $smallmove 1 px
  set $tocont focus; exec --no-startup-id exec i3fyra -m
  set $fdmtm floating disable, move to mark
  set $exe exec --no-startup-id exec
  set $win bindsym Mod4
  set $alt Mod1

  set $exefmb i3run -i fmB -e '\
    xfconf-query --channel thunar --property /last-view --set ThunarDetailsView \
    && xfconf-query --channel thunar --property /last-view --set ThunarIconView \
    && xfconf-query --channel thunar --property /last-show-hidden --set false \
    && xfconf-query --channel thunar --property /last-icon-view-zoom-level --set THUNAR_ZOOM_LEVEL_SMALL \
    && thunar & xdotool set_window --classname "fmB" `i3get -i thunar -r d -y`'

  set $exefmd i3run -i fmD -e '\
    xfconf-query --channel thunar --property /last-view --set ThunarDetailsView \
    && xfconf-query --channel thunar --property /last-view --set ThunarDetailsView \
    && xfconf-query --channel thunar --property /last-show-hidden --set true \
    && xfconf-query --channel thunar --property /last-details-view-zoom-level --set THUNAR_ZOOM_LEVEL_SMALLEST \
    && thunar & xdotool set_window --classname "fmD" `i3get -i thunar -r d -y`'

  set $notes i3run -i sublime_notes -e 'subl \
    --project ~/tmp/kortisar/sublime/projects/notes.sublime-project \
    && subl ~/dox/not/todo.note \
    && xdotool set_window --classname "sublime_notes" `i3get -t "(notes)" -r d -y`'


  set_from_resource $act i3wm.act #111313
  set_from_resource $ina i3wm.ina #111313
  set_from_resource $ina2 i3wm.ina2 #111313
  set_from_resource $whtl i3wm.whtl #111313
  set_from_resource $whtd i3wm.whtd #111313
  set_from_resource $red i3wm.red #FF0000
  set_from_resource $fnt i3wm.fnt Terminus
  set_from_resource $fsz i3wm.fsz 12 
  set $fsz 12
  #set $fnt Terminus

# >>> panicbuttons <<<

  bindsym F4         kill
  $win+Control+r     $exe i3-msg reload ; $exe polybar-msg cmd restart
  $win+$alt+r   $exe i3-msg restart ; $exe polybar-msg cmd restart
  $win+Shift+x  $exe lock.sh
  $win+Escape   $exe i3off ; $exe i3-msg exit

# >>> terminals <<<

  $win+Return           $exe i3run -i floatterm -e 'urxvtc -name floatterm'
  $win+Shift+Return     $exe i3run -i termsmall -e 'urxvtc -name termsmall'
  $win+Control+Return   $exe i3clone
  $win+$alt+Return      $exe urxvtc -name tempterm

# >>> sublime stuff <<<

  $win+s          $exe $editor
  $win+Shift+s    $exe $notes
  $win+Control+s  $exe subpromen
  $win+$alt+s     $exe subswap
  

# >>> i3run - sane applaunching for the modern tiler <<<

  $win+e       $exe $exefmd
  $win+Shift+e $exe $exefmb
  
  $win+f $exe $browser
  $win+a $exe i3term irssi
  $win+d $exe i3term ncmpcpp
  $win+5 $exe i3run -i qbittorrent -e 'qbittorrent'
  $win+6 $exe i3term newsboat
  $win+9 $exe i3term htop
  
  $win+Shift+grave $exe i3run -i gcolor2 -e 'gcolor2'

# >>> barmenu <<<
  bindsym F8                $exe newmenu
  bindsym F6                $exe getlink
  $win F6                   $exe addlink -f '3d.flf'
  bindsym Shift+F8          $exe subact
  $win+r                    $exe rofi -show run
  $win+space                $exe pbtog


# >>> media <<<

#$win+a $exe amixer -q -c 0 set Master playback 1dB+
# 94 = <, less
#bindcode Mod3+94 $exe amixer -q -c 0 set Master playback 1dB-
#$win+z $exe mpc -q next
#$win+Shift+Control+x $exe mpc -q toggle

# >>> misc <<<

  $win+z       $exe i3fyra -a
  $win+Shift+z focus mode_toggle
  $win+p       $exe i3fyra -l 'AB=-370 BD=250 AC=-75'
  
# >>> upload content <<<

  bindsym --release Mod4+Print $exe i3cast
  bindsym --release Print      $exe shoot

  $win+c $exe \
    xclip -o | curl -F c=@- https://ptpb.pw/?u=1 | \
    xclip -selection 'clipboard' && \
    notify-send "Paste uploaded"

# >>> mousekeys <<<

  bindsym --release button2 kill # mbutton on titlebar kills

# >>> debugging <<<

  $win+shift+t $exe ass st t # dump tree
  $win+shift+d \
    i3-save-tree --output eDP-1 > /tmp/i3layout-dump.json \
    && subl /tmp/i3layout-dump.json
  $win+b $exe runscript # run currently open file in sublime


# >>> moving the size of the focus <<<
   
  # $win+control+$left              resize shrink width  $bigsize
  # $win+control+Shift$left         resize shrink width  $smallsize
  # $win+control+$right             resize grow width    $bigsize
  # $win+control+Shift+$right       resize grow width    $smallsize
  # $win+control+$dow             resize shrink height $bigsize
  # $win+control+Shift+$dow       resize shrink height $smallsize
  # $win+control+$up                resize grow height   $bigsize
  # $win+control+Shift+$up          resize grow height   $smallsize

  # tl= u
  # >> Resizing

  $win+Control+$left $exe i3sizemode left
  $win+Control+$down $exe i3sizemode down
  $win+Control+$up $exe i3sizemode up
  $win+Control+$right $exe i3sizemode right

  $win+$left               $exe i3fyra -f l 
  $win+$right             $exe i3fyra -f r 
  $win+$down              $exe i3fyra -f d 
  $win+$up              $exe i3fyra -f u 

  $win+Shift+$left         $exe i3fyra -m l 
  $win+Shift+$right       $exe i3fyra -m r 
  $win+Shift+$down        $exe i3fyra -m d 
  $win+Shift+$up        $exe i3fyra -m u 

  $win+Tab                 $exe i3fyra -t r
  $win+Shift+Tab           $exe i3fyra -t l 

# >>> layout toggling <<<
  
  $win+g                   $exe i3loto h
  $win+Shift+g             $exe i3loto v

# >>> workspace stuff <<<

  $win+1  workspace 1; $exe \
    hsetroot -tile /home/bud/etc/bitmap-walls/patterns-png/line_diag3_2.png \
      -tint "$(xrdb -query | awk '/\*background/ {print $2}')"
  $win+2  workspace 2; $exe \
    hsetroot -tile /home/bud/etc/bitmap-walls/patterns-png/line_diag3_2.png \
      -tint "$(xrdb -query | awk '/\*color6:/ {print $2}')"
  $win+3  workspace 3; $exe \
    hsetroot -tile /home/bud/etc/bitmap-walls/patterns-png/line_diag3_2.png \
      -tint "$(xrdb -query | awk '/\*color4:/ {print $2}')"
  $win+4  workspace 4; $exe \
    hsetroot -tile /home/bud/etc/bitmap-walls/patterns-png/line_diag3_2.png \
      -tint "$(xrdb -query | awk '/\*background/ {print $2}')"
  # $win+F12 workspace back_and_forth

  $win+Shift+1 move container to workspace 1
  $win+Shift+2 move container to workspace 2
  $win+Shift+3 move container to workspace 3

# >>> settings <<<

  show_marks no
  floating_modifier $alt
  hide_edge_borders both
  focus_follows_mouse no
  font pango:$fnt $fsz
  workspace_auto_back_and_forth no

# >>> appearance <<<

  for_window [class="^.*"] border normal 1
  # for_window [tiling] border pixel 1
  # for_window [floating] border normal 1

  # widow Colors           border  bg     text    indic
  client.focused           $ina2   $ina2  $whtl    $ina2
  client.focused_inactive  $ina    $ina   $whtd    $ina
  client.unfocused         $ina    $ina   $whtd    $ina
  client.urgent            $red    $red   $red     $red

# >>> window rules <<<

  for_window [class="^.*"] floating enable, title_format " "
  

  for_window [class="Vivaldi-stable"]   title_format "vivaldi",     $tocont A
  for_window [class="mpv"]              title_format "mpv",         $tocont B
  for_window [class="feh"]              title_format "feh",         $tocont B
  for_window [instance="sublime_text"]  title_format "sublime",     $tocont A
  for_window [instance="sublime_notes"] title_format "todo",        $tocont D
  for_window [instance="spacefm"]       title_format "spacefm",     $tocont D
  for_window [instance="^fmD$"]         title_format "fmD",         $tocont D
  for_window [instance="^fmB$"]         title_format "fmB",         $tocont B
  for_window [instance="^surf$"]        title_format "surf",        $tocont D
  for_window [instance="irssi"]         title_format "irssi",       $tocont D
  for_window [instance="ncmpcpp"]       title_format "ncmpcpp",     $tocont B
  for_window [instance="qbittorrent"]   title_format "qbittorrent", $tocont C
  for_window [instance="htop"]          title_format "htop",        $tocont A
  for_window [instance="termside"]      title_format "URxvt",       $tocont B
  for_window [instance="termsmall"]     title_format "URxvt",       $tocont C
  for_window [instance="termsub"]       title_format "URxvt",       $tocont C
  for_window [instance="clonedterm"]    title_format "URxvt"

  for_window [title="^Klavaro - Main Menu$"] title_format "klavaro", move absolute position center
  
  for_window [title="^Klavaro - Fluidness$"] title_format "klavaro", $tocont A
  for_window [title="^Klavaro - Velocity$"]  title_format "klavaro", $tocont A

  for_window [title="DevDocs API Documentation$"]  title_format "DevDocs"
  for_window [title="ArchWiki$"]  title_format "ArchWiki"

  for_window [instance="floatterm"] title_format " ", resize set 350 px 250 px

  for_window [window_type="dialog"]    floating enable
  for_window [window_type="splash"]    floating enable
  for_window [window_type="utility"]   floating enable

  for_window [title="^Deletion confirmation$"] floating enable

# >>> automatic execution <<<

  $exe i3fyra -l 'AB=-370 BD=250 AC=-75'
  $exe polybar -c ~/.config/polybar/budbar -r example 2>&1 &

# >>> modes <<<

mode "topleft" {
  bindsym $left resize grow left 10 px or 10 ppt
  bindsym $right resize shrink left 10 px or 10 ppt

  bindsym $down resize shrink up 10 px or 10 ppt
  bindsym $up resize grow up 10 px or 10 ppt

  bindsym Return mode "default", title_format " "
  bindsym Escape mode "default", title_format " "
}

mode "topright" {
  bindsym $left resize shrink right 10 px or 10 ppt
  bindsym $right resize grow right 10 px or 10 ppt

  bindsym $down resize shrink up 10 px or 10 ppt
  bindsym $up resize grow up 10 px or 10 ppt

  bindsym Return mode "default", title_format " "
  bindsym Escape mode "default", title_format " "
}

mode "bottomleft" {
  bindsym $left resize grow left 10 px or 10 ppt
  bindsym $right resize shrink left 10 px or 10 ppt

  bindsym $down resize grow down 10 px or 10 ppt
  bindsym $up resize shrink down 10 px or 10 ppt

  bindsym Return mode "default", title_format " "
  bindsym Escape mode "default", title_format " "
}

mode "bottomright" {
  bindsym $left resize shrink right 10 px or 10 ppt
  bindsym $right resize grow right 10 px or 10 ppt

  bindsym $down resize grow down 10 px or 10 ppt
  bindsym $up resize shrink down 10 px or 10 ppt

  bindsym Return mode "default", title_format " "
  bindsym Escape mode "default", title_format " "
}

# bindsym $mod+r mode "resize"

# >>> notes <<<

  # workspace_auto_back_and_forth can cause trouble when tiling is extreme
  # without bindsym to workspaceswitch config doesn't work...

# syntax:ssHash


