# i3config - curated by budRich since 2016
# ========================================

# >>> todo <<<

# media keys, az 
#   doesn't work, c made player float..
#
# sublime sections for i3. add space when commenting.
#
# add window rules. 
# get to work with the ass...

# >>> initializatione <<<

  set $exe exec --no-startup-id exec

  set $left1   y
  set $down1   u
  set $up1     i
  set $right1  o

  set $left2   h
  set $down2   j
  set $up2     k
  set $right2  l

  set $left3   n
  set $down3   m
  set $up3     comma
  set $right3  period

  
  # set $browser i3run -c Surf -e 'surf'
  # set $browser i3run -c Vivaldi-stable -e 'vivaldi'
  set $browser i3run -c Vivaldi-stable -e 'vivaldi-snapshot'
  set $editor i3run -i sublime_text -e 'subl'
  set $filemanager i3run -i spacefm -e 'spacefm '
  set $bigsize   10 px or 10 ppt
  set $smallsize 3 px or 3 ppt
  set $bigmove   30 px
  set $smallmove 1 px
  set $tocont focus; exec --no-startup-id exec i3fyra -m
  set $notes i3run -i sublime_notes -e 'subl \
    --project ~/tmp/kortisar/sublime/projects/notes.sublime-project \
    && subl ~/dox/not/todo.note \
    && sleep 1 \
    && xdotool set_window --classname "sublime_notes" `i3get -t "(notes)" -r d`'

  set $alt Mod1
  set $win bindsym Mod4
  set $fdmtm floating disable, move to mark

  set_from_resource $act i3wm.act #111313
  set_from_resource $ina i3wm.ina #111313
  set_from_resource $red i3wm.red #FF0000
  # set_from_resource $fnt i3wm.fnt Terminus
  set $fntsz 8
  set $fnt Terminus

# >>> panicbuttons <<<

  bindsym F4         kill
  $win+Control+r     $exe i3-msg reload ; $exe polybar-msg cmd restart
  $win+$alt+r   $exe i3-msg restart ; $exe polybar-msg cmd restart
  $win+Shift+x  $exe lock.sh
  $win+Escape   $exe i3off ; $exe i3-msg exit

# >>> terminals <<<

  $win+Return           $exe i3run -i floatterm -e 'urxvtc -name floatterm'
  $win+Shift+Return     $exe i3run -i termsmall -e 'urxvtc -name termsmall'
  $win+Control+Return   $exe i3clone
  $win+$alt+Return      $exe urxvtc -name tempterm

# >>> sublime stuff <<<

  $win+s          $exe $editor
  $win+Shift+s    $exe $notes
  $win+Control+s  $exe subpromen
  $win+$alt+s     $exe subswap
  

# >>> i3run - sane applaunching for the modern tiler <<<
  $win+e $exe $filemanager
  
  $win+f $exe $browser
  $win+a $exe i3term irssi
  $win+d $exe i3term ncmpcpp
  $win+5 $exe i3run -i qbittorrent -e 'qbittorrent'
  $win+6 $exe i3term newsboat
  $win+9 $exe i3term htop
  
  $win+Shift+grave $exe i3run -i gcolor2 -e 'gcolor2'

# >>> barmenu <<<
  bindsym Shift+F8          $exe subact
  bindsym F8                $exe newmenu
  $win+r                    $exe rofi -show run
  $win+space                $exe pbtog


# >>> media <<<

#$win+a $exe amixer -q -c 0 set Master playback 1dB+
# 94 = <, less
#bindcode Mod3+94 $exe amixer -q -c 0 set Master playback 1dB-
#$win+z $exe mpc -q next
#$win+Shift+Control+x $exe mpc -q toggle

# >>> misc <<<

  $win+z       $exe i3fyra -a
  $win+Shift+z focus mode_toggle
  
# >>> upload content <<<

  bindsym --release Mod4+Print $exe i3cast
  bindsym --release Print      $exe shoot

  $win+c $exe \
    xclip -o | curl -F c=@- https://ptpb.pw/?u=1 | \
    xclip -selection 'clipboard' && \
    notify-send "Paste uploaded"

# >>> mousekeys <<<

  bindsym --release button2 kill # mbutton on titlebar kills

# >>> debugging <<<

  $win+shift+t $exe ass st t # dump tree
  $win+shift+d \
    i3-save-tree --output eDP-1 > /tmp/i3layout-dump.json \
    && subl /tmp/i3layout-dump.json
  $win+b $exe runscript # run currently open file in sublime


# >>> moving the size of the focus <<<
   
  $win+control+$left2              resize shrink width  $bigsize
  $win+control+Shift$left2         resize shrink width  $smallsize
  $win+control+$right2             resize grow width    $bigsize
  $win+control+Shift+$right2       resize grow width    $smallsize
  $win+control+$down2              resize shrink height $bigsize
  $win+control+Shift+$down2        resize shrink height $smallsize
  $win+control+$up2                resize grow height   $bigsize
  $win+control+Shift+$up2          resize grow height   $smallsize

  $win$left2               $exe i3fyra -f l 
  $win+$right2             $exe i3fyra -f r 
  $win+$down2              $exe i3fyra -f d 
  $win+$up2                $exe i3fyra -f u 

  $win+Shift$left2         $exe i3fyra -m l 
  $win+Shift+$right2       $exe i3fyra -m r 
  $win+Shift+$down2        $exe i3fyra -m d 
  $win+Shift+$up2          $exe i3fyra -m u 

  $win+Tab                 $exe i3fyra -t r
  $win+Shift+Tab           $exe i3fyra -t l 

# >>> layout toggling <<<
  
  $win+g                   $exe i3loto h
  $win+Shift+g             $exe i3loto v

# >>> workspace stuff <<<

  $win+1  workspace 1; $exe \
    hsetroot -tile /home/bud/etc/bitmap-walls/patterns-png/line_diag3_2.png \
      -tint "$(xrdb -query | awk '/\*background/ {print $2}')"
  $win+2  workspace 2; $exe \
    hsetroot -tile /home/bud/etc/bitmap-walls/patterns-png/line_diag3_2.png \
      -tint "$(xrdb -query | awk '/\*color6:/ {print $2}')"
  $win+3  workspace 3; $exe \
    hsetroot -tile /home/bud/etc/bitmap-walls/patterns-png/line_diag3_2.png \
      -tint "$(xrdb -query | awk '/\*color4:/ {print $2}')"
  $win+4  workspace 4; $exe \
    hsetroot -tile /home/bud/etc/bitmap-walls/patterns-png/line_diag3_2.png \
      -tint "$(xrdb -query | awk '/\*background/ {print $2}')"
  # $win+F12 workspace back_and_forth

  $win+Shift+1 move container to workspace 1
  $win+Shift+2 move container to workspace 2
  $win+Shift+3 move container to workspace 3

# >>> settings <<<

  show_marks no
  floating_modifier $alt
  hide_edge_borders both
  focus_follows_mouse no
  # font pango:$fnt $fntsz
  workspace_auto_back_and_forth no

# >>> appearance <<<

  for_window [class="^.*"] border normal 1
  # for_window [tiling] border pixel 1
  # for_window [floating] border normal 1

  # widow Colors           border  bg     text    indic
  client.focused           $act    $act   $act    $act
  client.focused_inactive  $ina    $ina   $ina    $ina
  client.unfocused         $ina    $ina   $ina    $ina
  client.urgent            $red    $red   $red    $red

# >>> window rules <<<

  for_window [class="^.*"] floating enable
  

  for_window [class="Vivaldi-stable"]    $tocont A
  for_window [class="mpv"]               $tocont B
  for_window [class="feh"]               $tocont B
  for_window [instance="sublime_text"]   $tocont A
  for_window [instance="sublime_notes"]  $tocont D
  for_window [instance="spacefm"]        $tocont D
  for_window [instance="irssi"]          $tocont D
  for_window [instance="ncmpcpp"]        $tocont B
  for_window [instance="qbittorrent"]    $tocont C
  for_window [instance="newsbeuter"]     $tocont D
  for_window [instance="htop"]           $tocont A

  for_window [instance="termside"]       $tocont B
  for_window [instance="termsmall"]      $tocont C
  for_window [instance="termsub"]        $tocont C

  for_window [title="^Klavaro - Main Menu$"] move absolute position center
  
  for_window [title="^Klavaro - Fluidness$"]  $tocont A
  for_window [title="^Klavaro - Velocity$"]   $tocont A

  for_window [class="URxvt"] exec notify-send "elll"

  for_window [instance="floatterm"] resize set 350 px 250 px

  for_window [window_type="dialog"]    floating enable
  for_window [window_type="splash"]    floating enable
  for_window [window_type="utility"]   floating enable

  no_focus   [instance="keydisplay"]
  for_window [instance="keydisplay"] sticky enable, border none

# >>> automatic execution <<<

  $exe i3fyra -l 'AB=-370 BD=250 AC=-75'
  $exe polybar -c ~/.config/polybar/budbar -r example 2>&1 &

# >>> notes <<<

  # workspace_auto_back_and_forth can cause trouble when tiling is extreme
  # without bindsym to workspaceswitch config doesn't work...

# syntax:ssHash


